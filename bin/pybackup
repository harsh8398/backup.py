#!/usr/bin/env python

import pybackup
import argparse
# TODO: check for better windows support
parser = argparse.ArgumentParser(description='Incremental Recursive Backup')
parser.add_argument('src', metavar='source_dir', type=str,
                    help='source dir path to backup')
parser.add_argument('dst', metavar='destination_dir', type=str,
                    help='destination dir path to backup')

args = parser.parse_args()

src = args.src
dst = args.dst

Files = pybackup.Files(src, dst)
flist = Files.get_files()
Dirs = pybackup.Dirs(src, dst)
success = Dirs.make_dirs(flist)
if success:
    Backup = pybackup.Backup(src, dst)
    print(Backup.do_only_copy(flist))
else:
    print("Script returned with error")
